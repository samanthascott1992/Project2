var images=[];$("#submitUpload").on("click",function(a){a.preventDefault();const b=$("#uploadForm")[0],c=new FormData(b);$.ajax({type:"POST",enctype:"multipart/form-data",url:"/upload",data:c,processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(a){alert("You have successfully uploaded an image!!!"),console.log(a)},error:function(a){console.log(a)}}).then(a=>{images.push(a.url)})}),$("#createPost").on("click",function(a){a.preventDefault();const b=$("#title").val().trim(),c=$("#body").val().trim(),d=$("#zip").val().trim(),e={title:b,body:c,zipCode:d,images:images.join(", ")};$.get("/api/user_data").then(a=>{e.UserId=a.id,$.ajax("/api/post",{method:"POST",data:e}).then(function(){alert("Successfully created post")}).then($.ajax("/api/posts",{method:"GET"})).then(a=>{a.redirect("/viewPost")})})}),$("#submitButton").on("click",a=>{a.preventDefault(),$.ajax("/api/login",{type:"POST",data:{email:$("#loginEmail").val().trim(),password:$("#loginPassword").val().trim()}}).then(()=>{alert("You have successfully logged in"),location.redirect="/createPost"})});function handleLoginErr(a){console.log(a),$("#alert .msg").text(a.responseJSON),$("#alert").fadeIn(500)}function signUpUser(a,b,c,d){$.post("/api/signup",{name:a,email:b,password:c,address:d}).then(function(){alert("You have successfully signed up!")}).catch(handleLoginErr)}$("#regButton").on("click",a=>{a.preventDefault();var b=`${$("#inputAddress").val().trim()} ${$("#inputCity").val().trim()}, ${$("#inputState").val().toString()} ${parseInt($("#inputZip").val())}`;const c={name:$("#inputName2").val().trim(),email:$("#inputEmail2").val().trim(),password:$("#inputPassword").val().trim(),address:b};console.log(c);c.name&&c.email&&c.password&&c.address&&(signUpUser(c.name,c.email,c.password,c.address),$("#inputName2").val(""),$("#inputEmail2").val(""),$("#inputPassword").val(""),$("#inputAddress").val(""),$("#inputCity").val(""),$("#inputState").val(""),$("#inputZip").val(""))}),$("#viewPostButton").on("click",a=>{a.preventDefault(),window.location.assign("/api/posts")});